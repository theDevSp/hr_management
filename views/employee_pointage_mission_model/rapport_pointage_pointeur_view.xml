<?xml version="1.0" encoding="utf-8"?>
<openerp>

    <data>
        <record id="rapport_pointage_form_user" model="ir.ui.view">
            <field name="name">rapport.pointage.form</field>
            <field name="model">hr.rapport.pointage</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!--<button name="action_correct" states="draft" string="Valider BCE" type="object" class="oe_highlight" />
                        <button name="action_retour"  string="Autoriser la correction" type="object" class="oe_highlight" groups="internal_purchase_requisition.group_admin"/>
                        <button name="action_draft"  string="Autoriser la modification" type="object" class="oe_highlight" groups="internal_purchase_requisition.group_admin"/>
                        
                        <button name="action_correct_bce" states="valid" string="Corriger le BCE" type="object" class="oe_highlight" />
                        
                        <button name="action_clotur"  string="Clôturer" type="object" class="oe_highlight" groups="internal_purchase_requisition.group_admin" />
                        <button name="action_cancel" states="draft,correct,valid,working_on" string="Annuler" type="object" class="oe_highlight" />
                        <button name="action_draft" states="cancel" string="Mettre en brouillon" type="object" class="oe_highlight" />-->
                        <field name="state" widget="statusbar"/>
                    </header>

                    <sheet>

                        <h1>
                            <field name="name" class="oe_inline" attrs="{'invisible': [('name','=','/')]}" readonly="1" />
                        </h1>
                        <group>
                            <group string="Rapport">
                                <group>
                                                            
                                    <group>
                                        <field name="employee_id"  options="{'no_create': True}"/>
                                        <field name="cin"/>
                                        <field name="job_id"/>
                                        <field name="period_id" />
                                        <field name="chantier_id" options="{'no_create': True}"/>
                                        <field name="vehicle_id" options="{'no_create': True}" />
                                        <field name="emplacement_chantier_id" options="{'no_create': True}" /> 
                                    </group>
                                </group>
                            </group>
                            <group string="Résultat Rapport">
                                <group >
                                    <div class="row">
                                        <div class="col-md-6 col-sm-2 panel-group">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="text-center">
                                                        <label for="total_h"/>
                                                    </h3>
                                                </div>
                                                <div class="panel-body">
                                                    <h1 class="text-center">
                                                        <field name="total_h" />
                                                    </h1>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-2 panel-group">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="text-center">
                                                        <label for="total_j"/>
                                                    </h3>
                                                </div>
                                                <div class="panel-body">
                                                    <h1 class="text-center">
                                                        <field name="total_j" />
                                                    </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </group>
                            </group>
                        </group>

                            <div class="row">
                                <div class="col-md-3 col-sm-2 panel-group">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="text-center">
                                                <label for="count_nbr_holiday_days"/>
                                            </h3>
                                        </div>
                                        <div class="panel-body">
                                            <h1 class="text-center">
                                                <field name="count_nbr_holiday_days" />
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-2 panel-group">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="text-center">
                                                <label for="count_nbr_ferier_days"/>
                                            </h3>
                                        </div>
                                        <div class="panel-body">
                                            <h1 class="text-center">
                                                <field name="count_nbr_ferier_days" />
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-2 panel-group">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="text-center">
                                                <label for="count_nbr_dim_days"/>
                                            </h3>
                                        </div>
                                        <div class="panel-body">
                                            <h1 class="text-center">
                                                <field name="count_nbr_dim_days" />
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-2 panel-group">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="text-center">
                                                <label for="count_nbr_absense_days"/>
                                            </h3>
                                        </div>
                                        <div class="panel-body">
                                            <h1 class="text-center">
                                                <field name="count_nbr_absense_days" />
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 col-sm-2">
                                    <div class="panel panel-warning">
                                        <div class="panel-heading">
                                            <h3 class="text-center">
                                                <label for="total_h_sup"/>
                                            </h3>
                                        </div>
                                        <div class="panel-body">
                                            <h1 class="text-center">
                                                <field name="total_h_sup" />
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3"></div>                                 
                            </div>

                    </sheet> 
                    <sheet class="custom_sheet">
                        <div class="row">
                            <div class="col-md-2 col-sm-2 panel-group">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">
                                        <h3 class="text-center">
                                            <label for="etat"/>
                                        </h3>
                                    </div>
                                    <div class="panel-body">
                                        <h3 class="text-center">
                                            <field name="etat" readonly="1"/>
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-2 panel-group">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        LEGENDE
                                    </div>
                                    <div class="panel-body">
                                        <div class="col-md-6">
                                            <div class="row" style="color:black;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:black;"></span>Jours Ouvrable</div>
                                            <div class="row" style="color:skyblue;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:skyblue;"></span>Jours Férié</div>
                                            <div class="row" style="color:blue;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:blue;"></span>Congé</div>
                                            <div class="row" style="color:grey;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:grey;"></span>Dimanche</div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row" style="color:tomato;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:tomato;"></span>Absense non Autorié</div>
                                            <div class="row" style="color:crimson;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:crimson;"></span>Abondement de Poste</div>
                                            <div class="row" style="color:crimson;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:crimson;"></span>Accident Travail</div>
                                            <div class="row" style="color:slategrey;"><span style="border: 1px solid #ccc; float: left; width: 35px; height: 20px; margin: 2px; background-color:slategrey;"></span>STC</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <group string="">
                             <field name="rapport_lines" nolabel="1">
                                <tree editable="bottom" colors="black:day_type==1; black:day_type==2; skyblue:day_type==3; blue:day_type==4; tomato:day_type==5; crimson:day_type==6; slategrey:day_type==7;">
                                    <field name="name" />
                                    <field name="h_travailler" string="TH"/>
                                    <!--<field name="h_sup" string="Supp"/>-->
                                    <field name="h_bonus" string="Bonus"/>
                                    <field name="chantier_id" options="{'no_create': True,'no_open': True}"/>
                                    <field name="vehicle_id"  options="{'no_create': True,'no_open': True}" readonly="1" invisible="1"/>
                                    <field name="vehicle_ids_resume"/>
                                    <button name="update_engin_list" type="object" class="oe_highlight oe_edit_only" string="OPEN" icon="gtk-add" />
                                    <field name="emplacement_chantier_id"  options="{'no_create': True,'no_open': True}"/>
                                    <field name="details" /> 
                                    <field name="day_type"/>    
                                    <field name="state" invisible="1"/>
                                    <field name="day" invisible="1"/>
                                </tree>
                            </field>
                        </group>
                    </sheet> 
                    <sheet>
                        <group string="">
                             <field name="note"/>
                        </group>
                    </sheet> 
                      
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>     

                </form>
            </field>
        </record>

        <record id="rapport_pointage_tree_user" model="ir.ui.view">
            <field name="name">rapport.pointage.tree</field>
            <field name="model">hr.rapport.pointage</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="cin"/>
                    <field name="job_id"/>
                    <field name="period_id" /> 
                    <field name="chantier_id"/>
                    <field name="vehicle_id"/>
                    <field name="emplacement_chantier_id"/>
                    <field name="total_h" />
                    <field name="total_j" />
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.server" id="pointage_user_salarie">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee1',etat=False)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_ouvrier">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee2',etat=False)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_salarie_stc">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee1',etat=7)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_ouvrier_stc">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee2',etat=7)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_salarie_abondement">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee1',etat=6)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_ouvrier_abondement">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee2',etat=6)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_salarie_absence">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee1',etat=5)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_ouvrier_absence">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee2',etat=5)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_salarie_at">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee1',etat=8)
            </field>
        </record>
        <record model="ir.actions.server" id="pointage_user_ouvrier_at">
            
            <field name="model_id" ref="model_hr_rapport_pointage"/>
            <field name="name" >Pointage Mensuelle</field >
            <field name="code">
                action = self.action_pointage_user(cr,uid,context.get('active_ids',[]),context=context,employee_type='employee2',etat=8)
            </field>
        </record>

        <menuitem id="pointage_main_menu_root" name="Pointage"  sequence="121" groups="nxtm_employee_mngt.group_pointage_user"/>
        <menuitem id="hr_pointage_user_main_menu" name="Rapport Pointage"  parent="pointage_main_menu_root" sequence = "1"/>

        <menuitem id="hr_pointage_slarie_main_menu" name="Pointage Salariés"  parent="hr_pointage_user_main_menu" sequence = "1"/>

        <menuitem id="hr_pointage_user_menu" name="Pointage mensuelle"  parent="hr_pointage_slarie_main_menu" action="pointage_user_salarie" sequence = "1"/>
        <menuitem id="hr_pointage_user_stc_menu" name="SalariÃ© STC"  parent="hr_pointage_slarie_main_menu" action="pointage_user_salarie_stc" sequence = "2"/>
        <menuitem id="hr_pointage_user_abondement_menu" name="SalariÃ© Abondement"  parent="hr_pointage_slarie_main_menu" action="pointage_user_salarie_abondement" sequence = "3"/>
        <menuitem id="hr_pointage_user_absencet_menu" name="SalariÃ© Absence"  parent="hr_pointage_slarie_main_menu" action="pointage_user_salarie_absence" sequence = "4"/>
        <menuitem id="hr_pointage_user_at_menu" name="Accident Travail"  parent="hr_pointage_slarie_main_menu" action="pointage_user_salarie_at" sequence = "5"/>

        <menuitem id="hr_pointage_ouvrier_main_menu" name="Pointage Ouvrier"  parent="hr_pointage_user_main_menu" sequence = "2"/>

        <menuitem id="hr_pointage_user_menu_ou" name="Pointage mensuelle"  parent="hr_pointage_ouvrier_main_menu" action="pointage_user_ouvrier" sequence = "1"/>
        <menuitem id="hr_pointage_user_stc_menu_ou" name="Ouvriers STC"  parent="hr_pointage_ouvrier_main_menu" action="pointage_user_ouvrier_stc" sequence = "2"/>
        <menuitem id="hr_pointage_user_abondement_menu_ou" name="Ouvriers Abondement"  parent="hr_pointage_ouvrier_main_menu" action="pointage_user_ouvrier_abondement" sequence = "3"/>
        <menuitem id="hr_pointage_user_absence_menu_ou" name="Ouvriers Absence"  parent="hr_pointage_ouvrier_main_menu" action="pointage_user_ouvrier_absence" sequence = "4"/>
        <menuitem id="hr_pointage_user_at_menu_ou" name="Accident Travail"  parent="hr_pointage_ouvrier_main_menu" action="pointage_user_ouvrier_at" sequence = "5"/>



        <record model="ir.ui.view" id="hr_pointeur_tree">
            <field name="name">hr.employee.new.tree</field>
            <field name="model">hr.employee</field>
            <field name="priority" eval="25"/>
            <field name="arch" type="xml">
                <tree colors="seagreen:state_employee_wtf=='new'; red:state_employee_wtf=='stc';">
                    <field name="name" />
                    <field name="identification_id" />
                    <field name="job_id" />
                    <field name="job" />
                    <field name="employee_type" />
                    <field name="profile_paie" />
                    <field name="chantier_id" />
                    <field name="vehicle_id" />
                    <field name="emplacement_chantier_id" />
                    <field name="state_employee_wtf" />
            </tree>
            </field>
        </record>

	<record model="ir.ui.view" id="hr_pointeur_form">
        <field name="name">hr.employee.new.form</field>
        <field name="model">hr.employee</field>
        <field name="priority" eval="25"/>
        <field name="arch" type="xml">
          <form>
            <header>    
				<field name="state_employee_wtf" widget="statusbar"/>
			</header>
            <sheet>

				<div class="oe_title">
					<label for="name" class="oe_edit_only"/>
					<h1>
						<field name="name"/>
					</h1>
                    <label for="identification_id" class="oe_edit_only"/>
					<h1>
						<field name="identification_id"/>
					</h1>
				</div>

                <div class="oe_right oe_button_box" name="button_box">
                    <button name="view_employee_rapport_pointage" class="oe_stat_button" icon="fa-book" type="object" groups="nxtm_employee_mngt.group_pointage_user">
                            <field name="rapport_pointage_count" widget="statinfo" string="Pointage"/>
                    </button>
                    
                </div>

				
				<group string="Information Personnel">
					<group>
						<field name="date_cin"/>
						<field name="date_naissance" />
						<field name="lieu_naissance" />
						<field name="employee_age" />
						<field name="working_years"/>
						<field name="gender" />
						<field name="marital" />
						<field name="nombre_enfants" />
					</group>
					<group>
						<field name="adress_personnel" />
						<field name="mobile_phone" />
						<field name="phone1" />
						<field name="phone2" />
						<field name="phone3" />
					</group>	
				</group>
				<group>
					<group string="Qualification">
						<group>
                            <field name="job_id"  options="{'no_create': True}"/>
							<field name="job" />
							<field name="employee_type" readonly="1"/>
							<field name="chantier_id" readonly="1"/>
							<field name="vehicle_id" readonly="1"/>
							<field name="emplacement_chantier_id" readonly="1"/>
						</group>
					</group>
					<group>
						<field name="embaucher_par"/>
						<field name="recommander_par"/>
						<field name="motif_enbauche"/>
						<field name="obs_embauche" />
					</group>
				</group>
				
				
            </sheet>
			<div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
          </form>
        </field>
    </record>

    <record model="ir.ui.view" id="hr_employee_transfert_tree">
        <field name="name">hr.employee.transfert.new.tree</field>
        <field name="model">hr.employee.transfert</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="rapport_id" />
                <field name="employee_id" />
                <field name="date_transfert" />
                <field name="date_arriver" />
                <field name="chantier_id_source" />
                <field name="vehicle_id_source" />
                <field name="emplacement_chantier_id_source" />
                <field name="chantier_id_destiation"/>
                <field name="vehicle_id_destiation" />
                <field name="emplacement_chantier_id_destiation" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="hr_employee_transfert_form">
        <field name="name">hr.employee.transfert.new.form</field>
        <field name="model">hr.employee.transfert</field>
        <field name="priority" eval="25"/>
        <field name="arch" type="xml">
          <form>
            <header>    
                <button name="action_draft" states="cancel" string="Mettre en brouillon" type="object" class="oe_highlight" />
                <button name="action_validation" states="draft" string="Validé" type="object" class="oe_highlight" />
                <button name="action_done" states="valide" string="Arrivé" type="object" class="oe_highlight" />
                <button name="action_cancel" states="draft,valide,done" string="Annuler" type="object" class="oe_highlight" />
				<field name="state" widget="statusbar"/>
			</header>
            <sheet>
                <div class="oe_title">
					<label for="name" class="oe_edit_only"/>
					<h1>
						<field name="name"/>
					</h1>
                    <label for="employee_id" class="oe_edit_only"/>
					<h1>
						<field name="employee_id" options="{'no_create': True,'no_open': True}"/>
					</h1>
				</div>

                <group>
                    <field name="date_transfert"/>
                    <field name="date_arriver"/>
                </group>
                
                <group string="Affectation" col="6">
                    <field name="chantier_id_source" options="{'no_create': True,'no_open': True}" placeholder="Chantier Source" nolabel="1"/>
                    <field name="vehicle_id_source" options="{'no_create': True,'no_open': True}" placeholder="Code Engin Source" nolabel="1"/>
                    <field name="emplacement_chantier_id_source" options="{'no_create': True,'no_open': True}" placeholder="Equipe Source" nolabel="1"/> 
                </group>
                <group string="Destination" col="6">
                    <field name="chantier_id_destiation" options="{'no_create': True,'no_open': True}" placeholder="Chantier Destination" nolabel="1"/>
                    <field name="vehicle_id_destiation" options="{'no_create': True,'no_open': True}" placeholder="Code Engin Destination" nolabel="1"/>
                    <field name="emplacement_chantier_id_destiation" options="{'no_create': True,'no_open': True}" placeholder="Equipe Destination" nolabel="1"/> 
                </group>
				
            </sheet>
			<div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
          </form>
        </field>
    </record>
    <record model="ir.actions.server" id="access_active_salarie_transfert_sortant">
            <field name="name" >salarie transfert employee sortant</field>
            <field name="model_id" ref="model_hr_employee_transfert"/>
            <field name="code">
                action = self.access_active_salarie_transfert_sortant(cr,uid,context.get('active_ids',[]),context=context)
            </field>
        </record>
    <record model="ir.actions.server" id="access_active_salarie_transfert_entrant">
            <field name="name" >salarie transfert employee entrant</field>
            <field name="model_id" ref="model_hr_employee_transfert"/>
            <field name="code">
                action = self.access_active_salarie_transfert_entrant(cr,uid,context.get('active_ids',[]),context=context)
            </field>
        </record>
    <record model="ir.actions.server" id="access_active_ouvrier_transfert_sortant">
            <field name="name" >ouvrier transfert employee sortant</field>
            <field name="model_id" ref="model_hr_employee_transfert"/>
            <field name="code">
                action = self.access_active_ouvrier_transfert_sortant(cr,uid,context.get('active_ids',[]),context=context)
            </field>
        </record>    
    <record model="ir.actions.server" id="access_active_ouvrier_transfert_entrant">
            <field name="name" >ouvrier transfert employee entrant</field>
            <field name="model_id" ref="model_hr_employee_transfert"/>
            <field name="code">
                action = self.access_active_ouvrier_transfert_entrant(cr,uid,context.get('active_ids',[]),context=context)
            </field>
        </record>  
    <menuitem id="hr_new_employee_user_main_menu" name="Employées"  parent="pointage_main_menu_root" sequence = "0"/>

    <menuitem id="action_server_new_employee_user" name="Nouveau Embauches" parent="hr_new_employee_user_main_menu" sequence="0" action="access_new_employee"/>

    <menuitem id="action_server_pointeur_salarier_main" name="Etat Salariés" parent="hr_new_employee_user_main_menu" sequence="2"/>
    <menuitem id="action_server_pointeur_salarier_active" name="Salariés Actifs" parent="action_server_pointeur_salarier_main" sequence="1" action="access_active_salarie"/>
    <menuitem id="action_server_pointeur_transfert_salarier_sortant" name="Transferts Sortants" parent="action_server_pointeur_salarier_main" sequence="20" action="access_active_salarie_transfert_sortant"/>
    <menuitem id="action_server_pointeur_transfert_salarier_entrant" name="Transferts Entrants" parent="action_server_pointeur_salarier_main" sequence="21" action="access_active_salarie_transfert_entrant"/>
    
    <menuitem id="action_server_pointeur_ouvrier" name="Etat Ouvriers" parent="hr_new_employee_user_main_menu" sequence="3"/>
    <menuitem id="action_server_pointeur_ouvrier_active" name="Ouvriers Actifs" parent="action_server_pointeur_ouvrier" sequence="1" action="access_active_ouvrier"/>
    <menuitem id="action_server_pointeur_ouvrier_tranfert_sortant" name="Transferts Sortants" parent="action_server_pointeur_ouvrier" sequence="2" action="access_active_ouvrier_transfert_sortant"/>
    <menuitem id="action_server_pointeur_ouvrier_tranfert_entrant" name="Transferts Entrants" parent="action_server_pointeur_ouvrier" sequence="3" action="access_active_ouvrier_transfert_entrant"/>


    <record model="ir.ui.view" id="hr_rapport_pointage_line_tree">
        <field name="name">hr.rapport.pointage.line.tree</field>
        <field name="model">hr.rapport.pointage.line</field>
        <field name="arch" type="xml">
            <tree editable="bottom" default_order="employee_id asc">
                
                <field name="employee_id" readonly="1"/>
                <field name="name" />
                <field name="h_travailler" string="TH"/>  
                <field name="h_bonus" string="bonus"/>
                <field name="h_sup" string="Supp"/>                
                <field name="chantier_id" options="{'no_create': True,'no_open': True}"/>
                <field name="vehicle_id"  options="{'no_create': True,'no_open': True}"/>
                <button name="update_engin_list" type="object" class="oe_highlight oe_edit_only" string="Ajouter" icon="gtk-add" />
                <field name="emplacement_chantier_id"  options="{'no_create': True,'no_open': True}"/>
                <field name="details" />                                           
                <field name="note" />
                <field name="day_type"/>    
                <field name="day" />
                <field name="state" invisible="1"/>
            </tree>
        </field>
    </record>
    <!--          Holidays         -->
    <record model="ir.ui.view" id="edit_holiday_form">
            <field name="name">Leave Request</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <form string="Leave Request">
                <field name="can_reset" invisible="1"/>
                <field name="type" invisible="1"/>
                <header>
                    <button string="Confirm" name="confirm" states="draft" type="workflow" class="oe_highlight"/>
                    <button string="Approve" name="validate" states="confirm" type="workflow" groups="base.group_hr_user" class="oe_highlight"/>
                    <button string="Validate" name="second_validate" states="validate1" type="workflow" groups="base.group_hr_user" class="oe_highlight"/>

                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,validate" statusbar_colors='{"confirm":"blue","validate1":"blue","refuse":"red"}'/>
                </header>
                <sheet>
                    <group>
                    
                        <group>
                            <field name="employee_id"  on_change="onchange_employee(employee_id)" options="{'no_create': True,'no_open': True}"/>
                            <field name="employee_remplacant_id"  options="{'no_create': True,'no_open': True}"/>
                            <field name="chantier_id" options="{'no_create': True,'no_open': True}"/>
                            <field name="motif"/>
                            <label for="number_of_days_temp" string="Duration"/>
                            <div>
                                <group col="1">
                                    <field name="date_start" nolabel="1" attrs="{'required':[('type', '=', 'remove')]}"/>
                                    <field name="date_end" nolabel="1" attrs="{'required':[('type', '=', 'remove')]}"/>
                                </group>
                                <div>
                                    <field name="number_of_days_temp" class="oe_inline"/> days
                                </div>
                            </div>
                        </group>
                        <group>
                        </group>
                    </group>
                    <field name="notes" nolabel="1" colspan="4" placeholder="Add a note..."/>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <record id="edit_holiday_new_inherit" model="ir.ui.view">
            <field name="name">Leave Request.inherit</field>
            <field name="model">hr.holidays</field>
            <field name="inherit_id" ref="hr_holidays.edit_holiday_new" />
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='date_from']" position="replace">
                    <field name="date_start" nolabel="1" attrs="{'required':[('type', '=', 'remove')]}"/>
                </xpath>
                <xpath expr="//field[@name='date_to']" position="replace">
                    <field name="date_end" nolabel="1" attrs="{'required':[('type', '=', 'remove')]}"/>
                </xpath>

            </field>
        </record>

        <record model="ir.ui.view" id="view_holiday_tree">
            <field name="name">hr.holidays.tree</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <tree colors="red:state == 'refuse';blue:state == 'draft';black:state in ('confirm','validate','validate1')" string="Allocation Requests">
                    <field name="employee_id"/>
                    <field name="holiday_type"/>
                    <field name="name"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                    <field name="number_of_days"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.server" id="access_employee_holidays">
            <field name="name" >Congés</field>
            <field name="model_id" ref="model_hr_holidays"/>
            <field name="code">
                action = self.action_pointage_user_holidays(cr,uid,context.get('active_ids',[]),context=context)
            </field>
        </record>

        <menuitem id="hr_employee_user_holidays_menu" name="Congés"  parent="pointage_main_menu_root" sequence = "0"/>
        <menuitem id="action_server_holidays_main" name="Congés" parent="hr_employee_user_holidays_menu" sequence="1" action="access_employee_holidays"/>

    </data>
    
</openerp>

