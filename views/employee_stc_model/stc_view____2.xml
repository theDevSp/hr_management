<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stc_tree" model="ir.ui.view">
        <field name="name">hr.stc.tree</field>
        <field name="model">hr.stc</field>
        <field name="arch" type="xml">
            <tree string="stc">
                <field name="name"/>
                <field name="employee_id"/>
                <field name="cin"/>
                <field name="job"/>
                <field name="job_id"/>
                <field name="chantier"/>
                <field name="date_debut"/>
                <field name="date_fin"/>
                <field name="montant_total"/>
                <field name="note"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="menu_view_stc_salarie_tree" model="ir.actions.act_window">
        <field name="name">STC Liste</field>
        <field name="res_model">hr.stc</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">['|',('employee_id.type_emp','=','s'),('employee_id.type_emp','=',False)]</field>
    </record>
    <record id="menu_view_stc_ouvrier_tree" model="ir.actions.act_window">
        <field name="name">STC Liste</field>
        <field name="res_model">hr.stc</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">['|',('employee_id.type_emp','=','o'),('employee_id.type_emp','=',False)]</field>
    </record>

    <!-- <record id="view_jf_tree" model="ir.ui.view">
            <field name="name">days.off.tree</field>
            <field name="model">days.off</field>
            <field name="arch" type="xml">
                <tree string="stc">
                    <field name="name"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                    <field name="nbr_jour"/>
                    <field name="periode"/>
                    <field name="quinzaine"/>
                </tree>
            </field>
        </record> -->
    <record id="view_stc_form" model="ir.ui.view">
        <field name="name">hr.stc.form</field>
        <field name="model">hr.stc</field>
        <field name="arch" type="xml">
            <form string="stc">
                <header>
                    <button name="action_done" states="valide" string="Términer" type="object" class="oe_highlight" />
                    <button name="compute_stc" states="valide" string="Lancer le calcul" type="object"/>

                    <button name="action_valide" states="draft" string="Valider" type="object" class="oe_highlight" />
                    <button name="action_cancel" states="done,valide" string="Annuler" type="object" class="oe_highlight" />
                    <button name="action_draft" states="cancel" string="Mettre en brouillon" type="object" class="oe_highlight" />
                    <button name="print_stc" states="valide,done" string="Imprimer" type="object" class="oe_highlight"/>
                    <field name="state" widget="statusbar"/>
                </header>
                <sheet>

                    <h1>
                        <field name="name" class="oe_inline" attrs="{'invisible': [('name','=','/')]}" readonly="1" />
                    </h1>
                    <hr/>
                    <div>
                        <h3>
                            <label for="montant_total"/>
                        </h3>
                        <h1>
                            <div>
                                <field name="montant_total" class="oe_inline" nolabel="1"/>
                            </div>

                        </h1>
                    </div>
                    <div>
                        <h3>
                            <label for="valide_salaire"/>
                        </h3>
                        <h1>
                            <div>
                                <field name="valide_salaire" class="oe_inline" nolabel="1"/>
                            </div>

                        </h1>
                    </div>

                    <group>
                        <group string="Information sur employée">
                            <field name="employee_id" />
                            <field name="employee_type" />
                            <field name="job_id" options="{'no_create': True}"/>
                            <field name="contract" options="{'no_create': True}"/>
                            <field name="cin"/>
                            <field name="job"/>
                            <field name="profile_paie"/>
                            <field name="date_debut"/>
                            <field name="date_fin"/>
                            <field name="chantier" options="{'no_create': True}"/>
                            <field name="vehicle" options="{'no_create': True}"/>
                            <field name="bank"/>
                            <field name="modePay"/>
                            <field name="ordre"/>

                        </group>
                        <group string="Information STC">

                            <field name="date_start"/>
                            <field name="salaire"/>
                            <field name="last_period_days"/>

                        </group>
                    </group>

                    <group>
                        <group string="Jours cangées et dimanches">
                            <label for="jr_conge"/>
                            <div>
                                <field name="jr_conge" class="oe_inline" nolabel="1"/>
 =
                                <field name="jr_conge_m" nolabel="1" class="oe_inline"/>
 (DH)
                            </div>
                            <field name="nombre_dimanche_a_payer"/>
                            <label for="jr_dim"/>
                            <div>
                                <field name="jr_dim" class="oe_inline" nolabel="1"/>
 =
                                <field name="montant_dim" nolabel="1" class="oe_inline"/>
 (DH)
                            </div>
                        </group>

                        <group string="Frais et dépenses">
                            <field name="frais_depense"/>
                            <field name="frais_route"/>
                            <label for="jr_block"/>
                            <div>
                                <field name="jr_block" class="oe_inline" nolabel="1"/>
 =
                                <field name="jr_block_m" nolabel="1" class="oe_inline"/>
 (DH)
                            </div>
                        </group>
                    </group>
                    <group string="Préavis">
                        <group>
                            <label for="preavis_retenu"/>
                            <div>
                                <field name="preavis_retenu" class="oe_inline" nolabel="1"/>
 =
                                <field name="preavis_retenu_m" nolabel="1" class="oe_inline"/>
 (DH)
                            </div>
                        </group>
                        <group>
                            <label for="preavis_ajouter"/>
                            <div>
                                <field name="preavis_ajouter" class="oe_inline" nolabel="1"/>
 =
                                <field name="preavis_ajouter_m" nolabel="1" class="oe_inline"/>
 (DH)
                            </div>
                        </group>
                    </group>

                    <group>
                        <group string="Prime et licenciement">
                            <field name="prime"/>
                            <field name="licenciement"/>
                            <field name="dgi"/>
                        </group>
                        <group string="Amande et Retenus">
                            <field name="amande"/>
                            <field name="retenu"/>
                            <field name="cimr"/>
                        </group>
                    </group>

                    <hr/>
                    <group string="Emprunts">

                        <field name="emprunt_lines" nolabel="1">
                            <tree editable="bottom">
                                <field name="emprunt_id" />
                                <field name="emprunt_montant" />
                                <field name="emprunt_balance" />
                                <field name="first_period"/>
                                <field name="last_period" />
                                <field name="add" />
                                <field name="montant_payer" />
                                <field name="note" />
                            </tree>
                        </field>

                    </group>
                    <center>
                        <div>
                            <h3>
                                <label for="emprunt"/>
                            </h3>
                            <h1>
                                <field name="emprunt" nolabel="1"/>
                            </h1>
                        </div>
                    </center>
                    <hr/>
                    <group string="Reste Salaire">

                        <field name="payslip_lines" nolabel="1">
                            <tree editable="bottom">
                                <field name="payslip_id" />
                                <field name="period_id" />
                                <field name="net_pay" />
                                <field name="chantier_id"/>
                                <field name="emplacement_chantier_id" />
                                <field name="vehicle_id" />
                            </tree>
                        </field>

                    </group>
                    <center>
                        <div>
                            <h3>
                                <label for="reste_salaire"/>
                            </h3>
                            <h1>
                                <field name="reste_salaire" nolabel="1"/>
                            </h1>
                        </div>
                    </center>
                    <hr/>
                    <group string="Observation et motif">
                        <field name="motif"/>
                        <field name="note"/>
                    </group>

                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_stc_filter" model="ir.ui.view">
        <field name="name">stc.select</field>
        <field name="model">hr.stc</field>
        <field name="arch" type="xml">
            <search>
                <filter string="STC Validés" icon="terp-personal" domain="[('state','=','valide')]]" name='stc_valide' />
                <filter string="STC Términés" icon="terp-personal" domain="[('state','=','done')]]" name='stc_done' />
                <filter string="STC Annulés" icon="terp-personal" domain="[('state','=','cancel')]]" name='stc_cancel' />
                <field name="name" string="N° STC" />
                <field name="employee_id" />
                <field name="chantier" />

                <group expand="0" string="Grouper Par">
                    <filter name="group_by_period" string="mensuelle" context="{'group_by':'date_start'}" />
                </group>
            </search>
        </field>
    </record>

    <record id="view_emprunt_filter" model="ir.ui.view">
        <field name="name">emprunt.select</field>
        <field name="model">hr.emprunt</field>
        <field name="arch" type="xml">
            <search>

                <field name="employee_id" />
                <field name="name" string="N° Emprunt" />
                <group expand="0" string="Grouper Par">
                    <filter name="group_by_period" string="mensuelle" context="{'group_by':'date_start'}" />
                </group>
            </search>
        </field>
    </record>

    <!-- <record id="view_jf_form" model="ir.ui.view">
        <field name="name">days.off.form</field>
        <field name="model">days.off</field>
        <field name="arch" type="xml">
            <form string="jf">
                <sheet>
                    <group>
                        <field name="name"/>
                    </group>
                    <group>
                        <field name="date_start"/>
                        <field name="date_end"/>
                    </group>
                    <group>
                        <field name="nbr_jour"/>
                    </group>
                    <group>
                        <field name="periode" options="{'no_create': True}"/>
                    </group>
                    <group>
                        <field name="quinzaine"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record> -->

    <!-- <record id="menu_view_jf_tree" model="ir.actions.act_window">
        <field name="name">days off Liste</field>
        <field name="res_model">days.off</field>
        <field name="view_mode">tree,form</field>
    </record> -->

    <!-- <menuitem id="hr_stc_menu" name="STC" parent="hr.menu_hr_root" sequence = "12"/>
    <menuitem id="hr_stc_list_salarie_menu" name="STC Salariés" parent="hr_stc_menu" action="menu_view_stc_salarie_tree" sequence = "1"/>
    <menuitem id="hr_stc_list_ouvrier_menu" name="STC Ouvriers" parent="hr_stc_menu" action="menu_view_stc_ouvrier_tree" sequence = "1"/>
    <menuitem id="hr_stc_jf_menu" name="Liste des jours fériés" parent="hr_stc_menu" action="menu_view_jf_tree" sequence = "2"/> -->

    <!-- <record id="view_emprunt_tree" model="ir.ui.view">
        <field name="name">hr.emprunt.tree</field>
        <field name="model">hr.emprunt</field>
        <field name="arch" type="xml">
            <tree string="Emprunt">
                <field name="employee_id" string="Employé"/>
                <field name="name"/>
                <field name="amount"/>
                <field name="echeance"/>
                <field name="responsible_id"/>
                <field name="motif"/>
                <field name="notes"/>
                <field name="length"/>
                <field name="first_period_id"/>
                <field name="last_period_id"/>
                <field name="state"/>
            </tree>
        </field>
    </record> -->

    <!-- <record id="menu_view_emprunt_valide_tree" model="ir.actions.act_window">
        <field name="name">emprunt Liste</field>
        <field name="res_model">hr.emprunt</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('state','!=','draft')]</field>
    </record> -->

    <!-- <record id="menu_view_emprunt_draft_tree" model="ir.actions.act_window">
        <field name="name">demande Liste</field>
        <field name="res_model">hr.emprunt</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('state','=','draft')]</field>
    </record>

    <menuitem id="hr_emprunt_menu" name="Emprunt" parent="hr.menu_hr_root" sequence = "10"/>

    <act_window name="Etat des paies" res_model="hr.emprunt" src_model="hr.emprunt" view_mode="form" view_id="" multi="True" target="new" key2="client_action_multi" id="action_payslip_export2" /> -->
<!-- 
    <record id="view_ic_tree" model="ir.ui.view">
        <field name="name">indemnite.conge.tree</field>
        <field name="model">indemnite.conge</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="employee_id"/>
                <field name="date_start"/>
                <field name="nbr_jour_apayer"/>
                <field name="montant"/>
                <field name="note"/>
                <field name="state"/>
            </tree>
        </field>
    </record> -->

    <!-- <record id="view_ic_form" model="ir.ui.view">
        <field name="name">indemnite.conge.form</field>
        <field name="model">indemnite.conge</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_valide" states="draft" string="Valider" type="object" class="oe_highlight" />
                    <button name="action_done" states="valide" string="Términer" type="object" class="oe_highlight" />
                    <button name="action_cancel" states="done,valide" string="Annuler" type="object" class="oe_highlight" />
                    <button name="action_draft" states="cancel" string="Mettre en brouillon" type="object" class="oe_highlight" />
                    <button name="print_ic" states="valide,done" string="Imprimer" type="object" class="oe_highlight"/>
                    <field name="state" widget="statusbar" />
                </header>
                <sheet>
                    <h1>
                        <field name="name" class="oe_inline" attrs="{'invisible': [('name','=','/')]}" readonly="1" />
                    </h1>
                    <hr/>
                    <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="cin"/>
                            <field name="job"/>
                            <field name="profile_paie"/>
                            <field name="date_debut"/>
                            <field name="chantier"/>
                            <field name="vehicle"/>
                            <field name="bank"/>
                        </group>
                        <group>
                            <field name="date_start"/>
                            <field name="salaire"/>
                        </group>
                    </group>
                    <group>
                        <group>
                            <field name="jr_conge"/>
                            <field name="nbr_jour_apayer"/>
                        </group>
                        <group>
                            <div>
                                <h3>
                                    <label for="montant"/>
                                </h3>
                                <h1>
                                    <field name="montant" nolabel="1"/>
                                </h1>
                            </div>
                        </group>
                    </group>
                    <group>
                        <field name="note"/>
                    </group>

                    <field name="slip_ids"/>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>

            </form>
        </field>
    </record>

    <record id="menu_view_ic_valide_tree" model="ir.actions.act_window">
        <field name="name">Liste Indemnité de Congé</field>
        <field name="res_model">indemnite.conge</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="hr_ic_list_menu" name="Indemnité de Congé" parent="hr_stc_menu" action="menu_view_ic_valide_tree" sequence = "4"/>

    <record id="view_gp_tree" model="ir.ui.view">
        <field name="name">prime.gestion.tree</field>
        <field name="model">gestion.fiche.paie</field>
        <field name="arch" type="xml">
            <tree string="Gestion des primes">
                <field name="periode"/>
                <field name="prime_ram"/>
                <field name="prime_aid"/>
                <field name="prime_aidk"/>
                <field name="date_ref"/>
            </tree>
        </field>
    </record>
    <record id="view_gp_form" model="ir.ui.view">
        <field name="name">prime.gestion.form</field>
        <field name="model">gestion.fiche.paie</field>
        <field name="arch" type="xml">
            <form string="jf">
                <group>
                    <group col = '4'>
                        <field name="periode"/>
                        <field name="date_ref"/>
                    </group>
                    <group>
                    </group>
                </group>
                <group>
                    <group>
                        <field name="prime_ram"/>

                        <field name="prime_aid"/>

                        <field name="prime_aidk"/>

                    </group>
                </group>

            </form>
        </field>
    </record>

    <record id="menu_view_gp_valide_tree" model="ir.actions.act_window">
        <field name="name">Gestion des primes</field>
        <field name="res_model">gestion.fiche.paie</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="view_fiche_export" model="ir.ui.view">
        <field name="name">fiche.export.form</field>
        <field name="model">fiche.export</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="employee_id"/>
                </group>
                <footer>
                    <button name="export_xls" string="Excel" type="object" class="oe_highlight"/>
                        Ou
                    <button string="Annuler" class="oe_link" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="action_fiche_export" model="ir.actions.act_window">
        <field name="name">Fiche de Salaire</field>
        <field name="res_model">fiche.export</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_fiche_export" />
        <field name="target">new</field>
    </record>
    <menuitem action="action_fiche_export" id="menu_fiche_export" parent="hr_stc_menu" sequence="5"/> -->

    <record id="seq_stc_code" model="ir.sequence.type">
        <field name="name">STC sequence</field>
        <field name="code">hr.stc</field>
    </record>

    <record id="sequence_stc" model="ir.sequence">
        <field name="name">STC</field>
        <field name="code">hr.stc</field>
        <field name="active">TRUE</field>
        <field name="prefix">STC</field>
        <field name="padding">5</field>
        <field name="number_increment">1</field>
        <field name="implementation">no_gap</field>
    </record>

    <!-- <record id="seq_ic_code" model="ir.sequence.type">
        <field name="name">IC sequence</field>
        <field name="code">indemnite.conge</field>
    </record> -->

    <record id="sequence_ic" model="ir.sequence">
        <field name="name">IC</field>
        <field name="code">indemnite.conge</field>
        <field name="active">TRUE</field>
        <field name="prefix">IC</field>
        <field name="padding">5</field>
        <field name="number_increment">1</field>
    </record>
</odoo>