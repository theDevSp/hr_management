<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="contrats_nouveaux_tree" model="ir.ui.view">
        <field name="name">Liste des Contrats</field>
        <field name="model">hr.contract</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <tree string="Contrats" multi_edit="1" sample="1" default_order='date_start ASC'>
                <field name="employee_id" readonly="1" widget="many2one_avatar_employee"/>
                <field name="name" readonly="1"/>
                <field name="type_emp"/>
                <field name="job_id"/>
                <field name="contract_type"/>
                <field name="date_start" readonly="1"/>
                <field name="date_end" readonly="1"/>
                <field name="chantier_id"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state == 'close'" decoration-success="state == 'open'"/>
                <field name="wage" invisible="1"/>
                <field name="company_id" invisible="1"/>
                <field name="message_needaction" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="contrats_nouveaux_view_form" model="ir.ui.view">
        <field name="name">Formulaire des Contrats</field>
        <field name="model">hr.contract</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <form>
                <header class="bar-box-shadow mb-4">            
                    <button name="to_new" string="New" type="object" attrs="{'invisible': [('state', 'in', ('draft','close'))]}" groups ="hr_management.group_agent_paie,hr_management.group_admin_paie"/>
                    <button name="to_running" string="Running" type="object" attrs="{'invisible': [('state', 'in', ('open','close'))]}" groups ="hr_management.group_agent_paie,hr_management.group_admin_paie"/>
                    <button name="to_expired" string="Expired" type="object" attrs="{'invisible': [('state', 'in', ('draft','close','cancel'))]}" groups ="hr_management.group_agent_paie,hr_management.group_admin_paie"/>
                    <button name="to_cancelled" string="Cancelled" type="object" attrs="{'invisible': [('state', 'in', ('draft', 'open', 'cancel'))]}" groups ="hr_management.group_admin_paie"/>
                    <field name="state" widget="statusbar" nolabel="1"/>
                </header>
                <div class="container-fliud">
                    <widget name="web_ribbon" title="ArchivÃ©" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                    <div class="oe_title pr-0" name="title">
                        <h2>
                            <field name="active" invisible="1"/>
                        </h2>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-12 col-lg-6 mb-3">
                            <div class="bg-white shadow p-3">
                                <div class="card bg-light my-3">
                                    <div class="card-body text-center">
                                        <h2 class="card-text">CONTRAT</h2>
                                    </div>
                                </div>
                                <div class="card bg-light my-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="name" class=""/></span>
                                                    </div>
                                                    <field name="name" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="contract_type" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="contract_type" options="{'no_create': True, 'no_open': True}" 
                                                                            attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="date_start" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="date_start" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="date_end" class=""/></span>
                                                    </div>
                                                    <field name="date_end" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="chantier_id" class=""/></span>
                                                    </div>
                                                    <field name="chantier_id" options="{'no_create': True, 'no_open': True}" 
                                                                            attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                </div> 
                            </div>
                            <div class="bg-white shadow p-3 my-3">
                                <div class="card bg-light my-3">
                                    <div class="card-body text-center">
                                        <h2 class="card-text">EMPLOYE</h2>
                                    </div>
                                </div>
                                <div class="card bg-light my-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="employee_id" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="employee_id" options="{'no_create': True, 'no_open': True}" 
                                                                            attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="type_emp" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="type_emp" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="job_id" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="company_id" invisible="1"/>
                                                    <field name="job_id" options="{'no_create': True, 'no_open': True}" 
                                                                        attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="embaucher_par" class=""/></span>
                                                    </div>
                                                    <field name="embaucher_par" options="{'no_create': True, 'no_open': True}" 
                                                            attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="recommander_par" class=""/></span>
                                                    </div>
                                                    <field name="recommander_par" options="{'no_create': True, 'no_open': True}" 
                                                            attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="motif_enbauche" class=""/></span>
                                                    </div>
                                                    <field name="motif_enbauche" class="form-control"/>
                                                </div>
                                            </div>
                                            <div class="col-12" attrs="{'invisible': [('motif_enbauche', '!=', '3' )]}">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="detail_motif" class=""/></span>
                                                    </div>
                                                    <field name="detail_motif" class="form-control"
                                                            attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                                                </div>
                                            </div>
                                        </div>
    
                                    </div> 
                                </div> 
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="bg-white shadow p-3 mt-3 mt-md-0">
                                <div class="card bg-light my-3">
                                    <div class="card-body text-center">
                                        <h2 class="card-text">SALAIRE</h2>
                                    </div>
                                </div>
                                <div class="card bg-light my-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="wage" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="wage" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="type_salaire" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                    </div>
                                                    <field name="type_salaire" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="salaire_actuel" class=""/></span>
                                                    </div>
                                                    <field name="salaire_actuel" class="form-control text-center"/>
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text"><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                    </div>
                                                </div>     
                                            </div>
                                            <div class="col-12 col-lg-6">
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><label for="tt_montant_a_ajouter" class=""/></span>
                                                    </div>
                                                    <field name="tt_montant_a_ajouter" class="form-control text-center" string="Augmentation"/>
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" ><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="alert alert-info text-center" role="alert">
                                                    Le salaire actuel reprÃ©sente le salaire de base plus les augmentations liÃ©es Ã  cet employÃ©.
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                </div> 
                            </div>
                            <div class="bg-white shadow p-3 my-3">
                                <div class="card bg-light my-3">
                                    <div class="card-body text-center">
                                        <h2 class="card-text">REPARTITION SALAIRE</h2>
                                    </div>
                                </div>
                                <div class="card bg-light my-3">
                                    <div class="card-body">
                                        <field name="repartition_salaire_ids">
                                            <tree editable="bottom" nolabel="1">
                                                <field name="payement_mode_id" />
                                                <field name="bank_account_id" />
                                                <field name="montant" />
                                            </tree>
                                        </field>
                                    </div> 
                                </div> 
                            </div>
                        </div>
                        <div class="col-12 col-lg-8 my-3">
                            <div class="bg-white shadow p-3">
                                <div class="col-12">
                                    <div class="card my-3">
                                        <div class="card-body text-center">
                                            <h6 class="card-text">Note</h6>
                                        </div>
                                        <div class="card-body text-dark">
                                            <field name="notes"/>
                                        </div>
                                    </div>  
                                </div> 
                            </div>
                        </div>
                        <div class="col-12 my-3">
                            <div class="bg-white shadow p-3">
                                <div class="card bg-light my-3">
                                    <div class="card-body text-center">
                                        <h2 class="card-text">INFORMATION SUR PROFILE</h2>
                                    </div>
                                </div>
                                <div class="card bg-light my-3">
                                    <div class="card-body">
                                        <div class="row d-flex align-items-center">
                                            <div class="col-12 col-lg-4">
                                                <div class="row">
                                                    <div class="input-group mb-3">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text" ><label for="profile_paie_id" class=""/><i class="fas fa-exclamation-triangle" style="color: #f00000;"></i></span>
                                                        </div>
                                                        <field name="profile_paie_id" options="{'no_create': True}" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                    </div>
                                                    <div class="form-group d-flex justify-content-center mb-3">
                                                        <field name="pp_personnel_id_many2one" invisible="1"/>
                                                        <button name="generer_profile" type="object" class="btn btn-success" icon="fa-upload" string="GÃ©nÃ©rer Profile" max-width="200" states="draft" attrs="{'invisible': [('pp_personnel_id_many2one', '!=', False ), ('state', '!=', 'draft')]}"/>
                                                        <button name="reset_profile" type="object" class="btn btn-danger" icon="fa-trash" string="Reset" max-width="200" states="draft" attrs="{'invisible': [('pp_personnel_id_many2one', '!=', False ), ('state', '!=', 'draft')]}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 col-lg-8">
                                                <div class="row">
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="completer_salaire_related" class=""/></span>
                                                            </div>
                                                            <field name="completer_salaire_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="plafonner_bonus_related" class=""/></span>
                                                            </div>
                                                            <field name="plafonner_bonus_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="avoir_conge_related" class=""/></span>
                                                            </div>
                                                            <field name="avoir_conge_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="saved_holidays_related" class=""/></span>
                                                            </div>
                                                            <field name="saved_holidays_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="jo_related" class=""/></span>
                                                            </div>
                                                            <field name="jo_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="plafonner_bonus_related" class=""/></span>
                                                            </div>
                                                            <field name="plafonner_bonus_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="payed_holidays_related" class=""/></span>
                                                            </div>
                                                            <field name="payed_holidays_related" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}" class="form-control"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="justification_related" class=""/></span>
                                                            </div>
                                                            <field name="justification_related" class="form-control" widget="boolean_toggle" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                                        </div>
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="type_profile_related" class=""/></span>
                                                            </div>
                                                            <field name="type_profile_related" class="form-control"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 col-lg-4">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="definition_nbre_jour_worked_par_mois_related" class=""/></span>
                                                            </div>
                                                            <field name="definition_nbre_jour_worked_par_mois_related" string="DÃ©finition" class="form-control"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-4">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="period_id_related" class=""/></span>
                                                            </div>
                                                            <field name="period_id_related" class="form-control"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-4">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="periodicity_related" class=""/></span>
                                                            </div>
                                                            <field name="periodicity_related" class="form-control"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 col-lg-4" attrs="{'invisible': [('definition_nbre_jour_worked_par_mois_related', '=', 'jr_mois')]}">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="nbre_jour_worked_par_mois_related" class=""/></span>
                                                            </div>
                                                            <field name="nbre_jour_worked_par_mois_related" 
                                                                    attrs="{'readonly': [('state', '!=', 'draft')]}" 
                                                                    string="Jrs / Mois" class="form-control"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-4">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="nbre_heure_worked_par_jour_related" class=""/></span>
                                                            </div>
                                                            <field name="nbre_heure_worked_par_jour_related" attrs="{'readonly': [('state', '!=', 'draft')]}" string="Heures / Jr" class="form-control"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-4">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="nbre_heure_worked_par_demi_jour_related" class=""/></span>
                                                            </div>
                                                            <field name="nbre_heure_worked_par_demi_jour_related" attrs="{'readonly': [('state', '!=', 'draft')]}" string="Heures / demi-Jr" class="form-control"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="current_month" class=""/></span>
                                                            </div>
                                                            <field name="current_month" class="form-control text-center"/>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="salaire_heure_related" class=""/></span>
                                                            </div>
                                                            <field name="salaire_heure_related" class="form-control text-center"/>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="salaire_demi_jour_related" class=""/></span>
                                                            </div>
                                                            <field name="salaire_demi_jour_related" class="form-control text-center"/>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <div class="input-group mb-3">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><label for="salaire_jour_related" class=""/></span>
                                                            </div>
                                                            <field name="salaire_jour_related" class="form-control text-center"/>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text" ><div class="o_form_label o_form_label_readonly">DH</div></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="contrats_actifs_search" model="ir.ui.view">
        <field name="name">Recherche des Contrats</field>
        <field name="model">hr.contract</field>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Contract"/>
                <field name="date_start"/>
                <field name="date_end"/>
                <field name="employee_id"/>
                <field name="job_id"/>
                <field name="chantier_id"/>
                <field name="resource_calendar_id"/>
                <searchpanel>
                    <field name="type_emp" icon="fa-user" enable_counters="1" select="multi"/>
                    <field name="state" icon="fa-file-contract" enable_counters="1" select="multi"/>
                    <field name="contract_type_id" icon="fa-file-contract" enable_counters="1" select="multi"/>
                    <field name="company_id" icon="fa-building" enable_counters="1" select="multi"/>
                </searchpanel>
            </search>
        </field>
    </record>
</odoo>